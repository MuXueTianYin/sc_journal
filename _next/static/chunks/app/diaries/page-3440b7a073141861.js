(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{63898:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var a=r(95155),s=r(12115),d=r(6874),i=r.n(d),l=r(35936),n=r(707);let o=e=>{let{diaries:t,currentId:r}=e;return(0,a.jsxs)("nav",{children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("input",{type:"text",placeholder:"搜索日记...",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-pink-500"})}),(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)(i(),{href:"/diaries/".concat(e.id),className:"block p-4 rounded-xl transition-all ".concat(r===e.id?"bg-pink-100 dark:bg-pink-900/30 border border-pink-300 dark:border-pink-700":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"),children:[(0,a.jsx)("h3",{className:"font-medium ".concat(r===e.id?"text-pink-700 dark:text-pink-300":"text-gray-800 dark:text-gray-200"),children:e.title}),(0,a.jsxs)("div",{className:"text-sm mt-1 flex items-center",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:(0,l.GP)(new Date(e.date),"yyyy年MM月dd日",{locale:n.g})}),(0,a.jsx)("span",{className:"mx-2 text-gray-300 dark:text-gray-600",children:"•"}),(0,a.jsxs)("span",{className:"text-pink-500",children:[e.excerpt.slice(0,20),"..."]})]})]},e.id))})]})};var c=r(51934),x=r(47863),g=r(66474);let h=e=>{let{headings:t}=e,[r,d]=(0,s.useState)(""),[l,n]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=()=>{let e=t.map(e=>{let{id:t}=e;return document.getElementById(t)}).filter(Boolean);if(0===e.length)return;let a=e.reduce((e,t)=>{let r=t.getBoundingClientRect();return r.top<100&&r.top>e.top?{id:t.id,top:r.top}:e},{id:"",top:-1/0});a.id&&r!==a.id&&d(a.id)};return t.length>0&&!r&&d(t[0].id),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[t,r]),0===t.length)?null:(0,a.jsxs)("div",{className:"sticky top-24",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3 cursor-pointer",onClick:()=>n(!l),children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"文章目录"}),(0,a.jsx)("button",{className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:l?(0,a.jsx)(x.A,{size:20}):(0,a.jsx)(g.A,{size:20})})]}),(0,a.jsxs)(c.P.div,{initial:{height:"auto"},animate:{height:l?"auto":0},className:"overflow-hidden",children:[(0,a.jsx)("ul",{className:"space-y-2 text-sm border-l-2 border-gray-200 dark:border-gray-700 pl-4",children:t.map(e=>(0,a.jsxs)("li",{style:{paddingLeft:"".concat((e.level-2)*12,"px"),borderLeft:r===e.id?"2px solid rgb(236, 72, 153)":"none",marginLeft:r===e.id?"-2px":"0"},className:"relative transition-all duration-200",children:[(0,a.jsx)(i(),{href:"#".concat(e.id),className:"block py-1 transition-colors truncate ".concat(r===e.id?"text-pink-600 dark:text-pink-400 font-medium":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"),children:e.text}),r===e.id&&(0,a.jsx)(c.P.div,{layoutId:"toc-highlight",className:"absolute inset-y-0 left-0 w-full bg-pink-50 dark:bg-pink-900/20 rounded -z-10",initial:!1,transition:{type:"spring",stiffness:300,damping:30}})]},e.id))}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400",children:["共 ",t.length," 个章节"]})]})]})},m=e=>{let{children:t,diaries:r,currentDiary:d}=e,[i,l]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-pink-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-pink-500 w-10 h-10 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"D"})}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"爱情日记"})]}),(0,a.jsx)("button",{className:"md:hidden text-gray-700 dark:text-gray-200",onClick:()=>l(!i),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})}),(0,a.jsxs)("div",{className:"flex flex-1",children:[i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>l(!1)}),(0,a.jsx)("aside",{className:"fixed md:static inset-y-0 left-0 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 z-50 transform ".concat(i?"translate-x-0":"-translate-x-full"," md:translate-x-0 transition-transform duration-300 ease-in-out overflow-y-auto"),children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"我们的故事"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"记录每一天的点滴幸福"})]}),(0,a.jsx)(o,{diaries:r,currentId:null==d?void 0:d.id})]})}),(0,a.jsx)("main",{className:"flex-1 p-4 md:p-8 overflow-auto",children:(0,a.jsx)("div",{className:"container mx-auto max-w-4xl",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,a.jsx)("div",{className:"flex-1",children:t}),(null==d?void 0:d.headings)&&d.headings.length>0&&(0,a.jsx)("div",{className:"hidden md:block w-64 flex-shrink-0",children:(0,a.jsx)(h,{headings:d.headings})})]})})})]}),(0,a.jsx)("footer",{className:"bg-white dark:bg-gray-800 py-6 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 text-center text-gray-600 dark:text-gray-400 text-sm",children:["\xa9 ",new Date().getFullYear()," 爱情日记 \xb7 记录我们共同的每一天"]})})]})}},84544:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.bind(r,63898))}},e=>{var t=t=>e(e.s=t);e.O(0,[491,874,805,441,684,358],()=>t(84544)),_N_E=e.O()}]);