{"version":3,"file":"static/chunks/app/diaries/page-a479a196933e3717.js","mappings":"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","sources":["webpack://_N_E/?a720","webpack://_N_E/./src/components/DiaryLayout/DiaryNavigation.tsx","webpack://_N_E/./src/components/DiaryLayout/TableOfContents.tsx","webpack://_N_E/./src/components/DiaryLayout/DiaryLayout.tsx"],"sourcesContent":["import(/* webpackMode: \"eager\", webpackExports: [\"__esModule\",\"default\"] */ \"D:\\\\code\\\\project\\\\frontend\\\\muxuetianyin-next\\\\node_modules\\\\next\\\\dist\\\\client\\\\app-dir\\\\link.js\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"D:\\\\code\\\\project\\\\frontend\\\\muxuetianyin-next\\\\src\\\\components\\\\DiaryLayout\\\\DiaryLayout.tsx\");\n","import Link from 'next/link';\r\nimport { format } from 'date-fns';\r\nimport { zhCN } from 'date-fns/locale';\r\nimport {Diary} from \"@/utils/content/utils\";\r\n\r\n\r\ninterface DiaryNavigationProps {\r\n    diaries: Omit<Diary, 'content' | 'headings'>[];\r\n    currentId?: string;\r\n}\r\n\r\nconst DiaryNavigation: React.FC<DiaryNavigationProps> = ({ diaries, currentId }) => {\r\n    return (\r\n        <nav>\r\n            <div className=\"mb-4\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"搜索日记...\"\r\n                    className=\"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-pink-500\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n                {diaries.map((diary) => (\r\n                    <Link\r\n                        key={diary.id}\r\n                        href={`/diaries/${diary.id}`}\r\n                        className={`block p-4 rounded-xl transition-all ${\r\n                            currentId === diary.id\r\n                                ? 'bg-pink-100 dark:bg-pink-900/30 border border-pink-300 dark:border-pink-700'\r\n                                : 'bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600'\r\n                        }`}\r\n                    >\r\n                        <h3 className={`font-medium ${\r\n                            currentId === diary.id\r\n                                ? 'text-pink-700 dark:text-pink-300'\r\n                                : 'text-gray-800 dark:text-gray-200'\r\n                        }`}>\r\n                            {diary.title}\r\n                        </h3>\r\n                        <div className=\"text-sm mt-1 flex items-center\">\r\n              <span className=\"text-gray-500 dark:text-gray-400\">\r\n                {format(new Date(diary.date), 'yyyy年MM月dd日', { locale: zhCN })}\r\n              </span>\r\n                            <span className=\"mx-2 text-gray-300 dark:text-gray-600\">•</span>\r\n                            <span className=\"text-pink-500\">\r\n                {diary.excerpt.slice(0, 20)}...\r\n              </span>\r\n                        </div>\r\n                    </Link>\r\n                ))}\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default DiaryNavigation;\r\n","// src/components/TableOfContents.tsx\r\n\"use client\"\r\nimport React, { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { motion } from 'framer-motion';\r\nimport { ChevronDown, ChevronUp } from 'lucide-react';\r\n\r\ninterface Heading {\r\n    id: string;\r\n    text: string;\r\n    level: number;\r\n}\r\n\r\ninterface TableOfContentsProps {\r\n    headings: Heading[];\r\n}\r\n\r\nconst TableOfContents: React.FC<TableOfContentsProps> = ({ headings }) => {\r\n    const [activeId, setActiveId] = useState('');\r\n    const [isExpanded, setIsExpanded] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const handleScroll = () => {\r\n            const headingElements = headings.map(({ id }) =>\r\n                document.getElementById(id)\r\n            ).filter(Boolean) as HTMLElement[];\r\n\r\n            if (headingElements.length === 0) return;\r\n\r\n            // 找到距离顶部最近的标题\r\n            const closestHeading = headingElements.reduce((closest, heading) => {\r\n                const rect = heading.getBoundingClientRect();\r\n                if (rect.top < 100 && rect.top > closest.top) {\r\n                    return { id: heading.id, top: rect.top };\r\n                }\r\n                return closest;\r\n            }, { id: '', top: -Infinity });\r\n\r\n            if (closestHeading.id && activeId !== closestHeading.id) {\r\n                setActiveId(closestHeading.id);\r\n            }\r\n        };\r\n\r\n        // 初始设置第一个标题为活动状态\r\n        if (headings.length > 0 && !activeId) {\r\n            setActiveId(headings[0].id);\r\n        }\r\n\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, [headings, activeId]);\r\n\r\n    if (headings.length === 0) return null;\r\n\r\n    return (\r\n        <div className=\"sticky top-24\">\r\n            <div\r\n                className=\"flex items-center justify-between mb-3 cursor-pointer\"\r\n                onClick={() => setIsExpanded(!isExpanded)}\r\n            >\r\n                <h3 className=\"text-lg font-semibold text-gray-800 dark:text-white\">文章目录</h3>\r\n                <button className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\">\r\n                    {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n                </button>\r\n            </div>\r\n\r\n            <motion.div\r\n                initial={{ height: 'auto' }}\r\n                animate={{ height: isExpanded ? 'auto' : 0 }}\r\n                className=\"overflow-hidden\"\r\n            >\r\n                <ul className=\"space-y-2 text-sm border-l-2 border-gray-200 dark:border-gray-700 pl-4\">\r\n                    {headings.map((heading) => (\r\n                        <li\r\n                            key={heading.id}\r\n                            style={{\r\n                                paddingLeft: `${(heading.level - 2) * 12}px`,\r\n                                borderLeft: activeId === heading.id\r\n                                    ? '2px solid rgb(236, 72, 153)'\r\n                                    : 'none',\r\n                                marginLeft: activeId === heading.id\r\n                                    ? '-2px'\r\n                                    : '0'\r\n                            }}\r\n                            className=\"relative transition-all duration-200\"\r\n                        >\r\n                            <Link\r\n                                href={`#${heading.id}`}\r\n                                className={`block py-1 transition-colors truncate ${\r\n                                    activeId === heading.id\r\n                                        ? 'text-pink-600 dark:text-pink-400 font-medium'\r\n                                        : 'text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200'\r\n                                }`}\r\n                            >\r\n                                {heading.text}\r\n                            </Link>\r\n\r\n                            {activeId === heading.id && (\r\n                                <motion.div\r\n                                    layoutId=\"toc-highlight\"\r\n                                    className=\"absolute inset-y-0 left-0 w-full bg-pink-50 dark:bg-pink-900/20 rounded -z-10\"\r\n                                    initial={false}\r\n                                    transition={{ type: 'spring', stiffness: 300, damping: 30 }}\r\n                                />\r\n                            )}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n\r\n                <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400\">\r\n                    共 {headings.length} 个章节\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TableOfContents;\r\n","\"use client\"\r\nimport React, { useState } from 'react';\r\nimport DiaryNavigation from './DiaryNavigation';\r\nimport TableOfContents from './TableOfContents';\r\nimport {Diary} from \"@/utils/content/utils\";\r\n\r\ninterface DiaryLayoutProps {\r\n    children: React.ReactNode;\r\n    diaries: Omit<Diary, 'content' | 'headings'>[];\r\n    currentDiary?: Diary;\r\n}\r\n\r\nconst DiaryLayout: React.FC<DiaryLayoutProps> = ({ children, diaries, currentDiary }) => {\r\n    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n\r\n    return (\r\n        <div className=\"flex flex-col min-h-screen bg-gradient-to-br from-pink-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800\">\r\n            {/* 顶部导航 */}\r\n            <header className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700\">\r\n                <div className=\"container mx-auto px-4 py-4 flex justify-between items-center\">\r\n                    <div className=\"flex items-center\">\r\n                        <div className=\"bg-pink-500 w-10 h-10 rounded-full flex items-center justify-center mr-3\">\r\n                            <span className=\"text-white font-bold text-xl\">D</span>\r\n                        </div>\r\n                        <div className=\"text-xl font-bold text-gray-800 dark:text-white\">爱情日记</div>\r\n                    </div>\r\n\r\n                    <button\r\n                        className=\"md:hidden text-gray-700 dark:text-gray-200\"\r\n                        onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n                    >\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"flex flex-1\">\r\n                {/* 移动端菜单遮罩 */}\r\n                {mobileMenuOpen && (\r\n                    <div\r\n                        className=\"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden\"\r\n                        onClick={() => setMobileMenuOpen(false)}\r\n                    />\r\n                )}\r\n\r\n                {/* 左侧日记导航 */}\r\n                <aside\r\n                    className={`fixed md:static inset-y-0 left-0 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 z-50 transform ${\r\n                        mobileMenuOpen ? 'translate-x-0' : '-translate-x-full'\r\n                    } md:translate-x-0 transition-transform duration-300 ease-in-out overflow-y-auto`}\r\n                >\r\n                    <div className=\"p-4\">\r\n                        <div className=\"mb-6\">\r\n                            <h1 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-2\">我们的故事</h1>\r\n                            <p className=\"text-gray-600 dark:text-gray-400 text-sm\">\r\n                                记录每一天的点滴幸福\r\n                            </p>\r\n                        </div>\r\n                        <DiaryNavigation diaries={diaries} currentId={currentDiary?.id} />\r\n                    </div>\r\n                </aside>\r\n\r\n                {/* 主内容区 */}\r\n                <main className=\"flex-1 p-4 md:p-8 overflow-auto\">\r\n                    <div className=\"container mx-auto max-w-4xl\">\r\n                        <div className=\"flex flex-col md:flex-row gap-8\">\r\n                            <div className=\"flex-1\">\r\n                                {children}\r\n                            </div>\r\n\r\n                            {/* 文章目录 - 桌面端 */}\r\n                            {currentDiary?.headings && currentDiary.headings.length > 0 && (\r\n                                <div className=\"hidden md:block w-64 flex-shrink-0\">\r\n                                    <TableOfContents headings={currentDiary.headings} />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </main>\r\n            </div>\r\n\r\n            <footer className=\"bg-white dark:bg-gray-800 py-6 border-t border-gray-200 dark:border-gray-700\">\r\n                <div className=\"container mx-auto px-4 text-center text-gray-600 dark:text-gray-400 text-sm\">\r\n                    © {new Date().getFullYear()} 爱情日记 · 记录我们共同的每一天\r\n                </div>\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DiaryLayout;\r\n"],"names":["diaries","currentId","nav","div","className","input","type","placeholder","map","Link","href","diary","id","h3","title","span","format","Date","date","locale","zhCN","excerpt","slice","headings","activeId","setActiveId","useState","TableOfContents","isExpanded","setIsExpanded","useEffect","handleScroll","headingElements","document","getElementById","filter","Boolean","length","closestHeading","reduce","closest","heading","rect","getBoundingClientRect","top","Infinity","window","addEventListener","removeEventListener","onClick","button","ChevronUp","size","ChevronDown","motion","initial","height","animate","ul","li","style","paddingLeft","level","borderLeft","marginLeft","text","layoutId","transition","stiffness","damping","children","DiaryLayout","currentDiary","mobileMenuOpen","setMobileMenuOpen","header","svg","xmlns","fill","viewBox","stroke","path","strokeLinecap","strokeLinejoin","strokeWidth","d","aside","h1","p","DiaryNavigation","main","footer","getFullYear"],"sourceRoot":"","ignoreList":[]}