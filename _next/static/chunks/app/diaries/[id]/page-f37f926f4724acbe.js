(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[820],{11844:(e,r,t)=>{Promise.resolve().then(t.bind(t,80806)),Promise.resolve().then(t.bind(t,63898))},63898:(e,r,t)=>{"use strict";t.d(r,{default:()=>h});var a=t(95155),s=t(12115),d=t(6874),i=t.n(d),n=t(35936),l=t(707);let o=e=>{let{diaries:r,currentId:t}=e;return(0,a.jsxs)("nav",{children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("input",{type:"text",placeholder:"搜索日记...",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-pink-500"})}),(0,a.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,a.jsxs)(i(),{href:"/diaries/".concat(e.id),className:"block p-4 rounded-xl transition-all ".concat(t===e.id?"bg-pink-100 dark:bg-pink-900/30 border border-pink-300 dark:border-pink-700":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"),children:[(0,a.jsx)("h3",{className:"font-medium ".concat(t===e.id?"text-pink-700 dark:text-pink-300":"text-gray-800 dark:text-gray-200"),children:e.title}),(0,a.jsxs)("div",{className:"text-sm mt-1 flex items-center",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:(0,n.GP)(new Date(e.date),"yyyy年MM月dd日",{locale:l.g})}),(0,a.jsx)("span",{className:"mx-2 text-gray-300 dark:text-gray-600",children:"•"}),(0,a.jsxs)("span",{className:"text-pink-500",children:[e.excerpt.slice(0,20),"..."]})]})]},e.id))})]})};var c=t(51934),x=t(47863),g=t(66474);let m=e=>{let{headings:r}=e,[t,d]=(0,s.useState)(""),[n,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=()=>{let e=r.map(e=>{let{id:r}=e;return document.getElementById(r)}).filter(Boolean);if(0===e.length)return;let a=e.reduce((e,r)=>{let t=r.getBoundingClientRect();return t.top<100&&t.top>e.top?{id:r.id,top:t.top}:e},{id:"",top:-1/0});a.id&&t!==a.id&&d(a.id)};return r.length>0&&!t&&d(r[0].id),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[r,t]),0===r.length)?null:(0,a.jsxs)("div",{className:"sticky top-24",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3 cursor-pointer",onClick:()=>l(!n),children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"文章目录"}),(0,a.jsx)("button",{className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:n?(0,a.jsx)(x.A,{size:20}):(0,a.jsx)(g.A,{size:20})})]}),(0,a.jsxs)(c.P.div,{initial:{height:"auto"},animate:{height:n?"auto":0},className:"overflow-hidden",children:[(0,a.jsx)("ul",{className:"space-y-2 text-sm border-l-2 border-gray-200 dark:border-gray-700 pl-4",children:r.map(e=>(0,a.jsxs)("li",{style:{paddingLeft:"".concat((e.level-2)*12,"px"),borderLeft:t===e.id?"2px solid rgb(236, 72, 153)":"none",marginLeft:t===e.id?"-2px":"0"},className:"relative transition-all duration-200",children:[(0,a.jsx)(i(),{href:"#".concat(e.id),className:"block py-1 transition-colors truncate ".concat(t===e.id?"text-pink-600 dark:text-pink-400 font-medium":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"),children:e.text}),t===e.id&&(0,a.jsx)(c.P.div,{layoutId:"toc-highlight",className:"absolute inset-y-0 left-0 w-full bg-pink-50 dark:bg-pink-900/20 rounded -z-10",initial:!1,transition:{type:"spring",stiffness:300,damping:30}})]},e.id))}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400",children:["共 ",r.length," 个章节"]})]})]})},h=e=>{let{children:r,diaries:t,currentDiary:d}=e,[i,n]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-pink-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-pink-500 w-10 h-10 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"D"})}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"爱情日记"})]}),(0,a.jsx)("button",{className:"md:hidden text-gray-700 dark:text-gray-200",onClick:()=>n(!i),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})}),(0,a.jsxs)("div",{className:"flex flex-1",children:[i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>n(!1)}),(0,a.jsx)("aside",{className:"fixed md:static inset-y-0 left-0 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 z-50 transform ".concat(i?"translate-x-0":"-translate-x-full"," md:translate-x-0 transition-transform duration-300 ease-in-out overflow-y-auto"),children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"我们的故事"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"记录每一天的点滴幸福"})]}),(0,a.jsx)(o,{diaries:t,currentId:null==d?void 0:d.id})]})}),(0,a.jsx)("main",{className:"flex-1 p-4 md:p-8 overflow-auto",children:(0,a.jsx)("div",{className:"container mx-auto max-w-4xl",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,a.jsx)("div",{className:"flex-1",children:r}),(null==d?void 0:d.headings)&&d.headings.length>0&&(0,a.jsx)("div",{className:"hidden md:block w-64 flex-shrink-0",children:(0,a.jsx)(m,{headings:d.headings})})]})})})]}),(0,a.jsx)("footer",{className:"bg-white dark:bg-gray-800 py-6 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 text-center text-gray-600 dark:text-gray-400 text-sm",children:["\xa9 ",new Date().getFullYear()," 爱情日记 \xb7 记录我们共同的每一天"]})})]})}},80806:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});var a=t(95155);t(12115);let s=e=>{let{content:r,date:t}=e;return(0,a.jsxs)("article",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 md:p-8",children:[(0,a.jsx)("div",{className:"mb-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("div",{className:"text-pink-500 font-medium",children:new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})}),(0,a.jsx)("div",{className:"prose prose-pink max-w-none dark:prose-invert prose-headings:font-serif prose-p:leading-relaxed",dangerouslySetInnerHTML:{__html:r}}),(0,a.jsx)("div",{className:"mt-10 pt-6 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-pink-100 dark:bg-pink-900/40 w-10 h-10 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)("span",{className:"text-pink-700 dark:text-pink-300 font-bold",children:"❤"})}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["记录于 ",new Date().toLocaleDateString("zh-CN")]})]})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[491,874,805,441,684,358],()=>r(11844)),_N_E=e.O()}]);